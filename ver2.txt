
import base64

encoded_script = '''ZnJvbSBzeXMgaW1wb3J0IHBsYXRmb3JtCmltcG9ydCBvcwppbXBvcnQgc3lzCmltcG9ydCBwbGF0Zm9ybQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IGpzb24gYXMganNvbmQKaW1wb3J0IHRpbWUKZnJvbSBjb2xvcmFtYSBpbXBvcnQgRm9yZSwgU3R5bGUsIGluaXQKaW1wb3J0IGhhc2hsaWIKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YQpmcm9tIGRpc2NvcmRfaW50ZXJhY3Rpb25zIGltcG9ydCB2ZXJpZnlfa2V5CmltcG9ydCBwbGF0Zm9ybQppbXBvcnQganNvbgppbXBvcnQgc3RhdGlzdGljcwppbXBvcnQgc3VicHJvY2Vzcwpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCmltcG9ydCBweXR6CmltcG9ydCByYW5kb20KCmF1dG9sb2cgPSBGYWxzZQpsaWNlbnNlX2ZpbGVfcGF0aCA9ICIvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvaG9tZS8ubGljZW5zZS50eHQiCmlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICJMaW51eCI6CiAgICBpZiBvcy5wYXRoLmV4aXN0cyhsaWNlbnNlX2ZpbGVfcGF0aCk6CiAgICAgICAgd2l0aCBvcGVuKGxpY2Vuc2VfZmlsZV9wYXRoLCAiciIpIGFzIGZpbGU6CiAgICAgICAgICAgIGxpY2Vuc2UgPSBmaWxlLnJlYWQoKQogICAgICAgICAgICBpZiBub3QgbGljZW5zZSA9PSBOb25lOgogICAgICAgICAgICAgICAgYXV0b2xvZyA9IFRydWUKICAgIGVsc2U6CiAgICAgICAgYXV0b2xvZyA9IEZhbHNlCmVsc2U6CiAgICBncGF0aCA9IG9zLmdldGVudignQVBQREFUQScpCiAgICBscGF0aCA9IG9zLnBhdGguam9pbihncGF0aCwgJ2xpY2Vuc2UudHh0JykKICAgIGlmIG9zLnBhdGguZXhpc3RzKGxwYXRoKToKICAgICAgICB3aXRoIG9wZW4obHBhdGgsICJyIikgYXMgZmlsZToKICAgICAgICAgICAgbGljZW5zZSA9IGZpbGUucmVhZCgpCiAgICAgICAgICAgIGlmIG5vdCBsaWNlbnNlID09IE5vbmU6CiAgICAgICAgICAgICAgICBhdXRvbG9nID0gVHJ1ZQoKaW5pdChhdXRvcmVzZXQ9VHJ1ZSkKQkFOTkVSaCA9IGZyIiIiCntGb3JlLlJFRH0KX19fICBfX18gICAgICAgICAgXwp8ICBcLyAgfCAgICAgICAgIHwgfAp8IC4gIC4gfF9fX19fIF9fIHwgfCBfXyBfIF8gICBfCnwgfFwvfCB8XyAgLyAnXyBcfCB8LyBfYCB8IHwgfCB8CnwgfCAgfCB8LyAvfCB8XykgfCB8IChffCB8IHxffCB8ClxffCAgfF8vX19ffCAuX18vfF98XF9fLF98XF9fLCB8CiAgICAgICAgICAgfCB8ICAgICAgICAgICAgIF9fLyB8CiAgICAgICAgICAgfF98ICAgICAgICAgICAgfF9fXy8KTWFkZSBieSBUTEcgw6/CvMWhIEBsdWNhczgxNjYzNjMge0ZvcmUuUkVTRVR9CgoiIiIKdmVyID0gIiMxLjAiCnRpbWV6b25lID0gJ0FzaWEvS3VhbGFfTHVtcHVyJwpvbmVtaW4gPSBUcnVlCndpbiA9IDAKbG9zZSA9IDAKZmlyc3R0aW1lID0gVHJ1ZQp0ZXN0ID0gTm9uZQpwcmludChCQU5ORVJoKQoKdXNlcl9pbnB1dCA9IGlucHV0KGYiRG8geW91IHdhbnQgdG8gdXNlIDMwcz8gY3VycmVudCBtb2RlIGlzIDYwcyBbWS9OXSIpCmlmIHVzZXJfaW5wdXQubG93ZXIoKSA9PSAieSI6CiAgICBvbmVtaW4gPSBGYWxzZQoKaWYgb25lbWluID09IFRydWU6CiAgICBkYXRhID0geyJwYWdlU2l6ZSI6MTAsInBhZ2VObyI6MSwidHlwZUlkIjoxLCJsYW5ndWFnZSI6MCwicmFuZG9tIjoiYWI5MTRlOGZiODViNDk4MmJjODU5N2JhZTRkMjk1N2UiLCJzaWduYXR1cmUiOiI5RDAyMUQxRTY0MTEwNkREMjM0MEM5M0I1MTBBRjM0QiIsInRpbWVzdGFtcCI6MTczNDIyMjI0Mn0KICAgIHRpbWVzZCA9IDYwCgplbHNlOgogICAgZGF0YSA9IHsicGFnZVNpemUiOiAxMCwicGFnZU5vIjogMSwidHlwZUlkIjogMzAsImxhbmd1YWdlIjogMCwicmFuZG9tIjogIjZhMjIyZmJhNzI4MDQxNzhhNzNiMTRlYTM2MDhmODgyIiwic2lnbmF0dXJlIjogIjBBQzFEMjRCNzcyRjgyMTMxRTgwRjhGODEyRjY2NDdFIiwidGltZXN0YW1wIjogMTczNDE4NDkzOH0KICAgIHRpbWVzZCA9IDMwCgojIGtleWF1dGggaW5pdGlhbGl6YXRpb24KY2xhc3MgYXBpOgogICAgbmFtZSA9IG93bmVyaWQgPSB2ZXJzaW9uID0gaGFzaF90b19jaGVjayA9ICIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIG93bmVyaWQsIHZlcnNpb24sIGhhc2hfdG9fY2hlY2spOgogICAgICAgIGlmIGxlbihvd25lcmlkKSAhPSAxMDoKICAgICAgICAgICAgcHJpbnQoIlZpc2l0IGh0dHBzOi8va2V5YXV0aC5jYy9hcHAvLCBjb3B5IFB5dGhvbiBjb2RlLCBhbmQgcmVwbGFjZSBjb2RlIGluIG1haW4ucHkgd2l0aCB0aGF0IikKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBvcy5fZXhpdCgxKQoKICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc2VsZi5vd25lcmlkID0gb3duZXJpZAogICAgICAgIHNlbGYudmVyc2lvbiA9IHZlcnNpb24KICAgICAgICBzZWxmLmhhc2hfdG9fY2hlY2sgPSBoYXNoX3RvX2NoZWNrCiAgICAgICAgc2VsZi5pbml0KCkKCiAgICBzZXNzaW9uaWQgPSBlbmNrZXkgPSAiIgogICAgaW5pdGlhbGl6ZWQgPSBGYWxzZQoKICAgIGRlZiBpbml0KHNlbGYpOgogICAgICAgIGlmIHNlbGYuc2Vzc2lvbmlkICE9ICIiOgogICAgICAgICAgICBwcmludCgiWW91J3ZlIGFscmVhZHkgaW5pdGlhbGl6ZWQhIikKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBvcy5fZXhpdCgxKQoKICAgICAgICBwb3N0X2RhdGEgPSB7CiAgICAgICAgICAgICJ0eXBlIjogImluaXQiLAogICAgICAgICAgICAidmVyIjogc2VsZi52ZXJzaW9uLAogICAgICAgICAgICAiaGFzaCI6IHNlbGYuaGFzaF90b19jaGVjaywKICAgICAgICAgICAgIm5hbWUiOiBzZWxmLm5hbWUsCiAgICAgICAgICAgICJvd25lcmlkIjogc2VsZi5vd25lcmlkCiAgICAgICAgfQoKICAgICAgICByZXNwb25zZSA9IHNlbGYuX19kb19yZXF1ZXN0KHBvc3RfZGF0YSkKCiAgICAgICAgaWYgcmVzcG9uc2UgPT0gIktleUF1dGhfSW52YWxpZCI6CiAgICAgICAgICAgIHByaW50KCJUaGUgYXBwbGljYXRpb24gZG9lc24ndCBleGlzdCIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgb3MuX2V4aXQoMSkKCiAgICAgICAganNvbiA9IGpzb25kLmxvYWRzKHJlc3BvbnNlKQoKICAgICAgICBpZiBqc29uWyJtZXNzYWdlIl0gPT0gImludmFsaWR2ZXIiOgogICAgICAgICAgICBpZiBqc29uWyJkb3dubG9hZCJdICE9ICIiOgogICAgICAgICAgICAgICAgcHJpbnQoIk5ldyBWZXJzaW9uIEF2YWlsYWJsZSIpCiAgICAgICAgICAgICAgICBkb3dubG9hZF9saW5rID0ganNvblsiZG93bmxvYWQiXQogICAgICAgICAgICAgICAgb3Muc3lzdGVtKGYic3RhcnQge2Rvd25sb2FkX2xpbmt9IikKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgICAgIG9zLl9leGl0KDEpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgiSW52YWxpZCBWZXJzaW9uLCBDb250YWN0IG93bmVyIHRvIGFkZCBkb3dubG9hZCBsaW5rIHRvIGxhdGVzdCBhcHAgdmVyc2lvbiIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgICAgICBvcy5fZXhpdCgxKQoKICAgICAgICBpZiBub3QganNvblsic3VjY2VzcyJdOgogICAgICAgICAgICBwcmludChqc29uWyJtZXNzYWdlIl0pCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgb3MuX2V4aXQoMSkKCiAgICAgICAgc2VsZi5zZXNzaW9uaWQgPSBqc29uWyJzZXNzaW9uaWQiXQogICAgICAgIHNlbGYuaW5pdGlhbGl6ZWQgPSBUcnVlCgoKICAgIGRlZiBfX2xvYWRfdXNlcl9kYXRhKHNlbGYsIGRhdGEpOgogICAgICAgIHNlbGYudXNlcl9kYXRhLnVzZXJuYW1lID0gZGF0YVsidXNlcm5hbWUiXQogICAgICAgIHNlbGYudXNlcl9kYXRhLmlwID0gZGF0YVsiaXAiXQogICAgICAgIHNlbGYudXNlcl9kYXRhLmh3aWQgPSBkYXRhWyJod2lkIl0gb3IgIk4vQSIKICAgICAgICBzZWxmLnVzZXJfZGF0YS5leHBpcmVzID0gZGF0YVsic3Vic2NyaXB0aW9ucyJdWzBdWyJleHBpcnkiXQogICAgICAgIHNlbGYudXNlcl9kYXRhLmNyZWF0ZWRhdGUgPSBkYXRhWyJjcmVhdGVkYXRlIl0KICAgICAgICBzZWxmLnVzZXJfZGF0YS5sYXN0bG9naW4gPSBkYXRhWyJsYXN0bG9naW4iXQogICAgICAgIHNlbGYudXNlcl9kYXRhLnN1YnNjcmlwdGlvbiA9IGRhdGFbInN1YnNjcmlwdGlvbnMiXVswXVsic3Vic2NyaXB0aW9uIl0KICAgICAgICBzZWxmLnVzZXJfZGF0YS5zdWJzY3JpcHRpb25zID0gZGF0YVsic3Vic2NyaXB0aW9ucyJdCgogICAgY2xhc3MgYXBwbGljYXRpb25fZGF0YV9jbGFzczoKICAgICAgICBudW1Vc2VycyA9IG51bUtleXMgPSBhcHBfdmVyID0gY3VzdG9tZXJfcGFuZWwgPSBvbmxpbmVVc2VycyA9ICIiCgogICAgY2xhc3MgdXNlcl9kYXRhX2NsYXNzOgogICAgICAgIHVzZXJuYW1lID0gaXAgPSBod2lkID0gZXhwaXJlcyA9IGNyZWF0ZWRhdGUgPSBsYXN0bG9naW4gPSBzdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb25zID0gIiIKCiAgICB1c2VyX2RhdGEgPSB1c2VyX2RhdGFfY2xhc3MoKQogICAgYXBwX2RhdGEgPSBhcHBsaWNhdGlvbl9kYXRhX2NsYXNzKCkKCiAgICBkZWYgX19sb2FkX2FwcF9kYXRhKHNlbGYsIGRhdGEpOgogICAgICAgIHNlbGYuYXBwX2RhdGEub25saW5lVXNlcnMgPSBkYXRhWyJudW1PbmxpbmVVc2VycyJdCgogICAgZGVmIF9fZG9fcmVxdWVzdChzZWxmLCBwb3N0X2RhdGEpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICAiaHR0cHM6Ly9rZXlhdXRoLndpbi9hcGkvMS4zLyIsIGRhdGE9cG9zdF9kYXRhLCB0aW1lb3V0PTEwCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIHBvc3RfZGF0YVsidHlwZSJdID09ICJsb2ciIG9yIHBvc3RfZGF0YVsidHlwZSJdID09ICJmaWxlIjoKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0CgogICAgICAgICAgICAjIEdldCB0aGUgc2lnbmF0dXJlIGFuZCB0aW1lc3RhbXAgZnJvbSB0aGUgaGVhZGVycwogICAgICAgICAgICBzaWduYXR1cmUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgieC1zaWduYXR1cmUtZWQyNTUxOSIpCiAgICAgICAgICAgIHRpbWVzdGFtcCA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCJ4LXNpZ25hdHVyZS10aW1lc3RhbXAiKQoKICAgICAgICAgICAgaWYgbm90IHNpZ25hdHVyZSBvciBub3QgdGltZXN0YW1wOgogICAgICAgICAgICAgICAgcHJpbnQoIk1pc3NpbmcgaGVhZGVycyBmb3Igc2lnbmF0dXJlIHZlcmlmaWNhdGlvbi4iKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICAgICAgb3MuX2V4aXQoMSkKCiAgICAgICAgICAgIHNlcnZlcl90aW1lID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChpbnQodGltZXN0YW1wKSkKICAgICAgICAgICAgY3VycmVudF90aW1lID0gZGF0ZXRpbWUudXRjbm93KCkKCiAgICAgICAgICAgIGJ1ZmZlcl9zZWNvbmRzID0gNQogICAgICAgICAgICB0aW1lX2RpZmZlcmVuY2UgPSBjdXJyZW50X3RpbWUgLSBzZXJ2ZXJfdGltZQoKICAgICAgICAgICAgaWYgdGltZV9kaWZmZXJlbmNlID4gdGltZWRlbHRhKHNlY29uZHM9MjAgKyBidWZmZXJfc2Vjb25kcyk6CiAgICAgICAgICAgICAgICBwcmludCgiVGltZXN0YW1wIGlzIHRvbyBvbGQgKGV4Y2VlZGVkIDIwIHNlY29uZHMgKyBidWZmZXIpLiIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgICAgICBvcy5fZXhpdCgxKQoKICAgICAgICAgICAgIyBQcm9jZWVkIHdpdGggY3JlYXRpbmcgZGVidWcgZm9sZGVycyBhbmQgbG9nZ2luZyMjIyMjIyMjIyMjIyMjIyMjI21pZ2h0IGVycm9yCgogICAgICAgICAgICBpZiBub3QgdmVyaWZ5X2tleShyZXNwb25zZS50ZXh0LmVuY29kZSgndXRmLTgnKSwgc2lnbmF0dXJlLCB0aW1lc3RhbXAsICc1NTg2YjRiYzY5YzdhNGI0ODdlNDU2M2E0Y2Q5NmFmZDM5MTQwZjkxOWJkMzFjZWE3ZDFjNmExZTg0Mzk0MjJiJyk6CiAgICAgICAgICAgICAgICBwcmludCgiU2lnbmF0dXJlIGNoZWNrc3VtIGZhaWxlZC4gUmVxdWVzdCB3YXMgdGFtcGVyZWQgd2l0aCBvciBzZXNzaW9uIGVuZGVkIG1vc3QgbGlrZWx5LiIpCiAgICAgICAgICAgICAgICBwcmludCgiUmVzcG9uc2U6ICIgKyByZXNwb25zZS50ZXh0KQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICAgICAgb3MuX2V4aXQoMSkKCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0CgogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlRpbWVvdXQ6CiAgICAgICAgICAgIHByaW50KCJSZXF1ZXN0IHRpbWVkIG91dC4gU2VydmVyIGlzIHByb2JhYmx5IGRvd24vc2xvdyBhdCB0aGUgbW9tZW50IikKCiAgICBkZWYgbGljZW5zZShzZWxmLCBrZXksIGh3aWQ9Tm9uZSk6CiAgICAgICAgc2VsZi5jaGVja2luaXQoKQogICAgICAgIGlmIGh3aWQgaXMgTm9uZToKICAgICAgICAgICAgaHdpZCA9IG90aGVycy5nZXRfaHdpZCgpCgogICAgICAgIHBvc3RfZGF0YSA9IHsKICAgICAgICAgICAgInR5cGUiOiAibGljZW5zZSIsCiAgICAgICAgICAgICJrZXkiOiBrZXksCiAgICAgICAgICAgICJod2lkIjogaHdpZCwKICAgICAgICAgICAgInNlc3Npb25pZCI6IHNlbGYuc2Vzc2lvbmlkLAogICAgICAgICAgICAibmFtZSI6IHNlbGYubmFtZSwKICAgICAgICAgICAgIm93bmVyaWQiOiBzZWxmLm93bmVyaWQKICAgICAgICB9CgogICAgICAgIHJlc3BvbnNlID0gc2VsZi5fX2RvX3JlcXVlc3QocG9zdF9kYXRhKQoKICAgICAgICBqc29uID0ganNvbmQubG9hZHMocmVzcG9uc2UpCgogICAgICAgIGlmIGpzb25bInN1Y2Nlc3MiXToKICAgICAgICAgICAgc2VsZi5fX2xvYWRfdXNlcl9kYXRhKGpzb25bImluZm8iXSkKICAgICAgICAgICAgcHJpbnQoanNvblsibWVzc2FnZSJdKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGpzb25bIm1lc3NhZ2UiXSkKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBvcy5fZXhpdCgxKQoKICAgIGRlZiBjaGVja2luaXQoc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYuaW5pdGlhbGl6ZWQ6CiAgICAgICAgICAgIHByaW50KCJJbml0aWFsaXplIGZpcnN0LCBpbiBvcmRlciB0byB1c2UgdGhlIGZ1bmN0aW9ucyIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgb3MuX2V4aXQoMSkKICAgICAgICAgICAgCiAgICAgICAgICAgIApkZWYgZ2VuZXJhdGVfcmFuZG9tX3V1aWQoKToKICAgIHJldHVybiAnJy5qb2luKHJhbmRvbS5jaG9pY2VzKCcwMTIzNDU2Nzg5YWJjZGVmJywgaz0zMikpCgpjbGFzcyBvdGhlcnM6CiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgZ2V0X2h3aWQoKToKICAgICAgICBpZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAiTGludXgiOgogICAgICAgICAgICBmaWxlX3BhdGggPSAiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL2hvbWUvLm1kIgoKICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZmlsZV9wYXRoKToKICAgICAgICAgICAgICAgIGlmIG9zLnN0YXQoZmlsZV9wYXRoKS5zdF9zaXplID09IDA6CiAgICAgICAgICAgICAgICAgICAgaHdpZCA9IGdlbmVyYXRlX3JhbmRvbV91dWlkKCkKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAndycpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoaHdpZCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBod2lkID0gZi5yZWFkKCkuc3RyaXAoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaHdpZCA9IGdlbmVyYXRlX3JhbmRvbV91dWlkKCkKICAgICAgICAgICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICd3JykgYXMgZjoKICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGh3aWQpCgogICAgICAgICAgICBpZiBub3Qgb3MuYWNjZXNzKF9fZmlsZV9fLCBvcy5XX09LKToKICAgICAgICAgICAgICAgIG9zLnN5c3RlbShmImNobW9kICt4IHtfX2ZpbGVfX30iKQogICAgICAgICAgICBpZiBod2lkIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBwcmludCgiRXJyb3Igb2NjdXJyZWQsIGV4aXRpbmcuLi4iKQogICAgICAgICAgICAgICAgc3lzLmV4aXQoKQoKICAgICAgICAgICAgcmV0dXJuIGh3aWQKCiAgICAgICAgZWxpZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAiV2luZG93cyI6CiAgICAgICAgICAgIHN5cy5leGl0KCkKCiAgICAgICAgZWxpZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAiRGFyd2luIjoKICAgICAgICAgICAgb3V0cHV0ID0gc3VicHJvY2Vzcy5Qb3BlbigKICAgICAgICAgICAgICAgICJpb3JlZyAtbCB8IGdyZXAgSU9QbGF0Zm9ybVNlcmlhbE51bWJlciIsIAogICAgICAgICAgICAgICAgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwgCiAgICAgICAgICAgICAgICBzaGVsbD1UcnVlCiAgICAgICAgICAgICkuY29tbXVuaWNhdGUoKVswXQogICAgICAgICAgICBzZXJpYWwgPSBvdXRwdXQuZGVjb2RlKCkuc3BsaXQoJz0nLCAxKVsxXS5yZXBsYWNlKCcgJywgJycpCiAgICAgICAgICAgIGh3aWQgPSBzZXJpYWxbMTotMl0KICAgICAgICAgICAgcmV0dXJuIGh3aWQKCiMjIyMjIyMjIyMjIyMjIyMjc3RhcnQjIyMjIyMjIyMjIyMjIyMKCiMgTmV3IGJhbm5lciBpbiByZWQKQkFOTkVSID0gZnIiIiIKe0ZvcmUuUkVEfQpfX18gIF9fXyAgICAgICAgICBfCnwgIFwvICB8ICAgICAgICAgfCB8CnwgLiAgLiB8X19fX18gX18gfCB8IF9fIF8gXyAgIF8KfCB8XC98IHxfICAvICdfIFx8IHwvIF9gIHwgfCB8IHwKfCB8ICB8IHwvIC98IHxfKSB8IHwgKF98IHwgfF98IHwKXF98ICB8Xy9fX198IC5fXy98X3xcX18sX3xcX18sIHwKICAgICAgICAgICB8IHwgICAgICAgICAgICAgX18vIHwKICAgICAgICAgICB8X3wgICAgICAgICAgICB8X19fLwpNYWRlIGJ5IFRMRyDDr8K8xaEgQGx1Y2FzODE2NjM2MyAKTW9kZSB7dGltZXNkfXMKIiIiCgoKIyBVUkwgYW5kIGhlYWRlcnMKdXJsID0gImh0dHBzOi8vbXpwbGF5YXBpLmNvbS9hcGkvd2ViYXBpL0dldE5vYXZlcmFnZUVtZXJkTGlzdCIKaGVhZGVycyA9IHsKICAgICJhY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qIiwKICAgICJhdXRob3JpemF0aW9uIjogIkJlYXJlciA8eW91ci10b2tlbj4iLAogICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiLAogICAgIm9yaWdpbiI6ICJodHRwczovL216MTU5LmNvbSIsCiAgICAicmVmZXJlciI6ICJodHRwczovL216MTU5LmNvbS8iLAogICAgInVzZXItYWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEzMS4wLjAuMCBTYWZhcmkvNTM3LjM2Igp9CgpkZWYgY29sb3JpemVfbnVtYmVyKG51bWJlciwgY29sb3IpOgogICAgaWYgInJlZCIgaW4gY29sb3I6CiAgICAgICAgcmV0dXJuIGYie0ZvcmUuUkVEfXtudW1iZXJ9IHtjb2xvcn17U3R5bGUuUkVTRVRfQUxMfSIKICAgIGVsaWYgImdyZWVuIiBpbiBjb2xvcjoKICAgICAgICByZXR1cm4gZiJ7Rm9yZS5HUkVFTn17bnVtYmVyfSB7Y29sb3J9e1N0eWxlLlJFU0VUX0FMTH0iCiAgICBlbGlmICJ2aW9sZXQiIGluIGNvbG9yOgogICAgICAgIHJldHVybiBmIntGb3JlLk1BR0VOVEF9e251bWJlcn0ge2NvbG9yfXtTdHlsZS5SRVNFVF9BTEx9IgogICAgZWxzZToKICAgICAgICByZXR1cm4gZiJ7bnVtYmVyfSB7Y29sb3J9IgoKZGVmIGNsZWFyX2NvbnNvbGUoKToKICAgIG9zLnN5c3RlbSgnY2xzJyBpZiBvcy5uYW1lID09ICdudCcgZWxzZSAnY2xlYXInKQoKZGVmIGNvdW50ZG93bl90aW1lcihzZWNvbmRzKToKICAgIGZvciByZW1haW5pbmcgaW4gcmFuZ2Uoc2Vjb25kcywgMCwgLTEpOgogICAgICAgIHByaW50KGYie0ZvcmUuUkVEfVN0YXJ0aW5nIG5leHQgcmVxdWVzdCBpbiB7cmVtYWluaW5nfSBzZWNvbmRzLi4ue1N0eWxlLlJFU0VUX0FMTH0iLCBlbmQ9IlxyIikKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICBwcmludCgiXG4iKQoKZGVmIGdldGNoZWNrc3VtKCk6CiAgICBtZDVfaGFzaCA9IGhhc2hsaWIubWQ1KCkKICAgIGZpbGUgPSBvcGVuKCcnLmpvaW4oc3lzLmFyZ3YpLCAicmIiKQogICAgbWQ1X2hhc2gudXBkYXRlKGZpbGUucmVhZCgpKQogICAgZGlnZXN0ID0gbWQ1X2hhc2guaGV4ZGlnZXN0KCkKICAgIHJldHVybiBkaWdlc3QKCmtleWF1dGhhcHAgPSBhcGkoCiAgICBuYW1lID0gIldpbmdvSGFjayIsICMgQXBwIG5hbWUKICAgIG93bmVyaWQgPSAiRnNzVnh5d3BJSSIsICMgQWNjb3VudCBJRAogICAgdmVyc2lvbiA9ICIxLjAiLCAjIEFwcGxpY2F0aW9uIHZlcnNpb24uIFVzZWQgZm9yIGF1dG9tYXRpYyBkb3dubG9hZHMgc2VlIHZpZGVvIGhlcmUgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1rVzE5NVBMQ0JLcwogICAgaGFzaF90b19jaGVjayA9IGdldGNoZWNrc3VtKCkKKQoKZGVmIG5ld19tZXRob2QoYWxsX251bWJlcnMpOgogICAgZ2xvYmFsIHNpemUKICAgIHRyaXBsZXQgPSBpbnQoIiIuam9pbihtYXAoc3RyLCBhbGxfbnVtYmVyc1s6M10pKSkKCiAgICB0cmlwbGV0X21vZF85ID0gc3VtKGludChkaWdpdCkgZm9yIGRpZ2l0IGluIHN0cih0cmlwbGV0KSkKICAgIHdoaWxlIHRyaXBsZXRfbW9kXzkgPiA5OgogICAgICAgIHRyaXBsZXRfbW9kXzkgPSBzdW0oaW50KGRpZ2l0KSBmb3IgZGlnaXQgaW4gc3RyKHRyaXBsZXRfbW9kXzkpKQogICAgdHJpcGxldF94MiA9IHRyaXBsZXRfbW9kXzkgKiAyCiAgICBmaW5hbF9yZXN1bHQgPSB0cmlwbGV0X3gyICUgMTAKCiAgICBpZiBmaW5hbF9yZXN1bHQgPCA0OgogICAgICAgIHNpemUgPSAiKCBTTUFMTCApIgogICAgICAgIGZpbmFsID0gZiJ7cmFuZG9tLnJhbmRpbnQoMCwgNCl9LCB7ZmluYWxfcmVzdWx0fSIKICAgIGVsaWYgZmluYWxfcmVzdWx0ID09IDQ6CiAgICAgICAgc2l6ZSA9ICIoIFNNQUxMICkiCiAgICAgICAgZmluYWwgPSBmIntyYW5kb20ucmFuZGludCgwLCA0KX0sIHtmaW5hbF9yZXN1bHR9IgogICAgZWxzZToKICAgICAgICBzaXplID0gIiggQklHICkiCiAgICAgICAgZmluYWwgPSBmIntyYW5kb20ucmFuZGludCg1LCA5KX0sIHtmaW5hbF9yZXN1bHR9IgoKICAgIHByaW50KGYie0ZvcmUuWUVMTE9XfXJlc3VsdDoge2ZpbmFsfSBtaWdodCBiZSB7c2l6ZX17U3R5bGUuUkVTRVRfQUxMfSIpCiAgICBwcmludChmIntGb3JlLllFTExPV313aW46IHt3aW59LCBsb3NlOiB7bG9zZX17U3R5bGUuUkVTRVRfQUxMfSIpCgppbXBvcnQgd2FybmluZ3MKd2FybmluZ3MuZmlsdGVyd2FybmluZ3MoImlnbm9yZSIsIGNhdGVnb3J5PURlcHJlY2F0aW9uV2FybmluZykKCmRlZiBmYXN0X3NlY29uZHNfdW50aWxfbmV4dF9pbnRlcnZhbChpbnRlcnZhbF9zZWNvbmRzPTYwKToKICAgIGN1cnJlbnRfdGltZSA9IGRhdGV0aW1lLnV0Y25vdygpIyBVc2UgVVRDIGZvciBzcGVlZAogICAgY3VycmVudF9zZWNvbmRzID0gY3VycmVudF90aW1lLnNlY29uZAogICAgY3VycmVudF9taWNyb3NlY29uZHMgPSBjdXJyZW50X3RpbWUubWljcm9zZWNvbmQKICAgIHNlY29uZHNfdW50aWxfbmV4dF9pbnRlcnZhbCA9IGludGVydmFsX3NlY29uZHMgLSAoY3VycmVudF9zZWNvbmRzICUgaW50ZXJ2YWxfc2Vjb25kcykgLSAoMSBpZiBjdXJyZW50X21pY3Jvc2Vjb25kcyA+IDAgZWxzZSAwKQogICAgcmV0dXJuIHNlY29uZHNfdW50aWxfbmV4dF9pbnRlcnZhbAoKCiNtYWluIGxvb3AKZGVmIG1haW4oKToKICAgIGdsb2JhbCBvbmVtaW4KICAgIGdsb2JhbCBmaXJzdHRpbWUKICAgIGdsb2JhbCB3aW4KICAgIGdsb2JhbCBsb3NlCiAgICB0cnk6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgaWYgb25lbWluID09IFRydWU6CiAgICAgICAgICAgICAgICBuaWcgPSBmYXN0X3NlY29uZHNfdW50aWxfbmV4dF9pbnRlcnZhbCg2NCkKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgInBhZ2VTaXplIjogMTAsCiAgICAgICAgICAgICAgICAgICAgInBhZ2VObyI6IDEsCiAgICAgICAgICAgICAgICAgICAgInR5cGVJZCI6IDEsCiAgICAgICAgICAgICAgICAgICAgImxhbmd1YWdlIjogMCwKICAgICAgICAgICAgICAgICAgICAicmFuZG9tIjogImFiOTE0ZThmYjg1YjQ5ODJiYzg1OTdiYWU0ZDI5NTdlIiwKICAgICAgICAgICAgICAgICAgICAic2lnbmF0dXJlIjogIjlEMDIxRDFFNjQxMTA2REQyMzQwQzkzQjUxMEFGMzRCIiwKICAgICAgICAgICAgICAgICAgICAidGltZXN0YW1wIjogMTczNDIyMjI0MgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGltZXNkID0gNjAKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG5pZyA9IGZhc3Rfc2Vjb25kc191bnRpbF9uZXh0X2ludGVydmFsKDM0KQogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAicGFnZVNpemUiOiAxMCwKICAgICAgICAgICAgICAgICAgICAicGFnZU5vIjogMSwKICAgICAgICAgICAgICAgICAgICAidHlwZUlkIjogMzAsCiAgICAgICAgICAgICAgICAgICAgImxhbmd1YWdlIjogMCwKICAgICAgICAgICAgICAgICAgICAicmFuZG9tIjogIjZhMjIyZmJhNzI4MDQxNzhhNzNiMTRlYTM2MDhmODgyIiwKICAgICAgICAgICAgICAgICAgICAic2lnbmF0dXJlIjogIjBBQzFEMjRCNzcyRjgyMTMxRTgwRjhGODEyRjY2NDdFIiwKICAgICAgICAgICAgICAgICAgICAidGltZXN0YW1wIjogMTczNDE4NDkzOAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGltZXNkID0gMzAKCiAgICAgICAgICAgIGNsZWFyX2NvbnNvbGUoKQogICAgICAgICAgICBwcmludChCQU5ORVIpCiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQoKICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgaXRlbXMgPSByZXNwb25zZS5qc29uKClbImRhdGEiXVsibGlzdCJdCiAgICAgICAgICAgICAgICBhbGxfbnVtYmVycyA9IFtdICAjIFJlc2V0IG51bWJlcnMgZm9yIGVhY2ggaXRlcmF0aW9uCiAgICAgICAgICAgICAgICBmb3IgaXRlbSBpbiBpdGVtczoKICAgICAgICAgICAgICAgICAgICBudW1iZXIgPSBpdGVtWyJudW1iZXIiXQogICAgICAgICAgICAgICAgICAgIGNvbG9yID0gaXRlbVsiY29sb3VyIl0KICAgICAgICAgICAgICAgICAgICBwcmludChjb2xvcml6ZV9udW1iZXIobnVtYmVyLCBjb2xvcikpCiAgICAgICAgICAgICAgICAgICAgYWxsX251bWJlcnMuYXBwZW5kKG51bWJlcikgICMgQXBwZW5kIHRoZSBudW1iZXIgdG8gdGhlIGxpc3QKCiAgICAgICAgICAgICAgICBpZiBub3QgZmlyc3R0aW1lOgogICAgICAgICAgICAgICAgICAgIGlmIGludChhbGxfbnVtYmVyc1swXSkgPCA0OgogICAgICAgICAgICAgICAgICAgICAgICBsYXRlc3QgPSAiKCBTTUFMTCApIgogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVzdCA9ICIoIEJJRyApIgoKICAgICAgICAgICAgICAgICAgICBpZiBsYXRlc3QgPT0gc2l6ZToKICAgICAgICAgICAgICAgICAgICAgICAgd2luID0gd2luICsgMQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGxvc2UgPSBsb3NlICsgMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB3aW4gPSAwCiAgICAgICAgICAgICAgICAgICAgbG9zZSA9IDAKCiAgICAgICAgICAgICAgICBmaXJzdHRpbWUgPSBGYWxzZQoKICAgICAgICAgICAgICAgIG5ld19tZXRob2QoYWxsX251bWJlcnMpCgogICAgICAgICAgICAgICAgY291bnRkb3duX3RpbWVyKG5pZykKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChmIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0iKQogICAgICAgICAgICAgICAgYnJlYWsKCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgcHJpbnQoIlxuU3RvcHBlZCBieSB1c2VyIikgICMgRml4ZWQgaW5kZW50YXRpb24gaGVyZQogICAgICAgIHN5cy5leGl0KCkKCmlmIGF1dG9sb2cgPT0gVHJ1ZToKICAgIG1haW4oKQplbHNlOgogICAga2V5ID0gaW5wdXQoJ0VudGVyIHlvdXIgbGljZW5zZTogJykKICAgIGtleWF1dGhhcHAubGljZW5zZShrZXkpCiAgICBpZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAiTGludXgiOgogICAgICAgIHdpdGggb3BlbihsaWNlbnNlX2ZpbGVfcGF0aCwgInciKSBhcyBmaWxlOgogICAgICAgICAgICBmaWxlLndyaXRlKGtleSkKICAgIGVsc2U6CiAgICAgICAgd2l0aCBvcGVuKGxwYXRoLCAidyIpIGFzIGZpbGU6CiAgICAgICAgICAgIGZpbGUud3JpdGUoa2V5KQoKbWFpbigpCg=='''
exec(base64.b64decode(encoded_script).decode('utf-8'))
